<button class="btn btn-primary" (click)="toggleViews('upload')">Upload Excel</button> &nbsp;&nbsp;&nbsp;
<button class="btn btn-primary" (click)="toggleViews('create')">Create New</button>&nbsp;&nbsp;&nbsp;
<button class="btn btn-primary" (click)="toggleViews('view')">View All</button>
<br>
<br>
<div *ngIf="upload">
    <input type="file" name="lookupExcel" (change)="onSelectFile($event)" id="lookupExcel">
    <button class="btn btn-primary" (click)="uploadLookupExcel()">Upload Excel</button>
</div>
<br>
<br>
<p-table #tt *ngIf="viewAll && !createNew" [style]="{'width':'50%','margin-top':'8px'}" [value]="lookupList"
    [paginator]="true" [rows]="10">
    <ng-template pTemplate="caption">
        <i class="pi pi-search" style="margin:4px 4px 0 0"></i>
        <input type="text" pInputText size="50" placeholder="Global Filter"
            (input)="tt.filterGlobal($event.target.value, 'contains')" style="width:auto">
    </ng-template>
    <ng-template pTemplate="header" let-columns>
        <tr>
            <th>Lookup Definition Name</th>
            <th>Lookup Value</th>
            <th>Lookup Display Name</th>
            <th>Created Date</th>
            <th>Update Date</th>
            <th>Deletion</th>
            <th>Update</th>
        </tr>
        <tr>
            <th *ngFor="let col of columns" [ngSwitch]="col.field">
                <input *ngSwitchCase="'vin'" pInputText type="text"
                    (input)="tt.filter($event.target.value, col.field, col.filterMatchMode)">
                <div *ngSwitchCase="'year'">
                    {{yearFilter}}
                    <i class="pi pi-times"
                        (click)="yearFilter=null;tt.filter(null, col.field, col.filterMatchMode)"></i>
                    <p-slider [style]="{'width':'75%','margin-top':'8px'}" [(ngModel)]="yearFilter" [min]="1970"
                        [max]="2010" (onChange)="onYearChange($event, dt)"></p-slider>
                </div>
                <p-dropdown *ngSwitchCase="'brand'" [options]="brands" [style]="{'width':'100%'}"
                    (onChange)="tt.filter($event.value, col.field, 'equals')"></p-dropdown>
                <p-multiSelect *ngSwitchCase="'color'" [options]="colors" defaultLabel="All Colors"
                    (onChange)="tt.filter($event.value, col.field, 'in')"></p-multiSelect>
            </th>
        </tr>
    </ng-template>
    <!-- <ng-template pTemplate="body" let-lookup>
        <tr>
            <td>{{lookup.lookupDefName}}</td>
            <td>{{lookup.lookupValue}}</td>
            <td>{{lookup.displayName}}</td>
            <td>{{lookup.createdDate === null ? "" : lookup.createdDate| date:'dd MMM, yyyy'}}</td>
            <td>{{lookup.updateDate === null ? "" : lookup.updateDate| date:'dd MMM, yyyy'}}</td>
            <td>
                <button class="btn-primary" (click)="toggleDelete(lookup.lookupId)">
                    <div *ngIf="lookup.deleted != 'Y'">Delete</div>
                    <div *ngIf="lookup.deleted === 'Y'">Undelete</div>
                </button>
            </td>
            <td>
                <button class="btn-primary" (click)="updateRecord(lookup.lookupId)">Update</button>
            </td>
        </tr>
    </ng-template> -->
    <ng-template pTemplate="body" let-lookup let-editing="editing" let-ri="rowIndex">
        <tr [pEditableRow]="lookup">
            <td pEditableColumn>
                <p-cellEditor>
                    <ng-template pTemplate="input">
                        <p-dropdown [options]="lookupDefinitions" [(ngModel)]="lookup.lookupDefName"
                            [style]="{'width':'100%'}">
                        </p-dropdown>
                    </ng-template>
                    <ng-template pTemplate="output">
                        {{lookup.lookupDefName}}
                    </ng-template>
                </p-cellEditor>
            </td>
            <td pEditableColumn>
                <p-cellEditor>
                    <ng-template pTemplate="input">
                        <input pInputText type="text" [(ngModel)]="lookup.lookupValue" lookupValue>
                    </ng-template>
                    <ng-template pTemplate="output">
                        {{lookup.lookupValue}}
                    </ng-template>
                </p-cellEditor>
            </td>
            <td pEditableColumn>
                <p-cellEditor>
                    <ng-template pTemplate="input">
                        <input pInputText type="text" [(ngModel)]="lookup.displayName" displayName>
                    </ng-template>
                    <ng-template pTemplate="output">
                        {{lookup.displayName}}
                    </ng-template>
                </p-cellEditor>
            </td>
            <td pEditableColumn>
                {{lookup.createdDate === null ? "" : lookup.createdDate| date:'dd MMM, yyyy'}}
            </td>
            <td pEditableColumn>{{lookup.updateDate === null ? "" : lookup.updateDate| date:'dd MMM, yyyy'}}</td>
            <td style="text-align:center">
                <button class="btn-primary" (click)="toggleDelete(lookup.lookupId)">
                    <div *ngIf="lookup.deleted != 'Y'">Delete</div>
                    <div *ngIf="lookup.deleted === 'Y'">Undelete</div>
                </button>
                <button *ngIf="!editing" pButton type="button" pInitEditableRow icon="pi pi-pencil"
                    class="ui-button-info btn-primary" (click)="onRowEditInit(lookup)">Edit</button>
                <button *ngIf="editing" pButton type="button" pSaveEditableRow icon="pi pi-check"
                    class="ui-button-success btn-primary" style="margin-right: .5em"
                    (click)="onRowEditSave(lookup)">Save</button>
                <button *ngIf="editing" pButton type="button" pCancelEditableRow icon="pi pi-times"
                    class="ui-button-danger btn-primary" (click)="onRowEditCancel(lookup, ri)">Cancel</button>
            </td>
            <td><button class="btn-primary" (click)="updateRecord(lookup.lookupId)">Update</button></td>
        </tr>
    </ng-template>
</p-table>



<br>
<br>
<div>

    <form [formGroup]="loookupCreationForm" (ngSubmit)="createLookup()">
        <table *ngIf="!viewAll && createNew" class="table table-bordered table-striped"
            style="width: 75%; background:lightblue">
            <thead>
                <tr>
                    <th>Lookup Definition Name</th>
                    <th>Lookup Value</th>
                    <th>Lookup Display Name</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>
                        <div class="form-group">
                            <select name="lookupDefName" formControlName="lookupDefName" class="form-control"
                                [ngClass]="{ 'is-invalid': submitted && f.lookupDefName.errors }">
                                <option *ngFor="let lookupName of lookupDefNames; let i = index;" [selected]="i==0">
                                    {{lookupName}}</option>
                            </select>
                            <div *ngIf="submitted && f.lookupDefName.errors" class="invalid-feedback">
                                <div *ngIf="f.lookupDefName.errors.required">Lookup Definition Name is required</div>
                            </div>
                        </div>
                    </td>
                    <td>
                        <div class="form-group">
                            <input type="lookupValue" class="form-control"
                                [ngClass]="{ 'is-invalid': submitted && f.lookupValue.errors }"
                                formControlName="lookupValue" id="lookupValue" placeholder="Lookup Value"
                                style="width: 100%;">
                            <div *ngIf="submitted && f.lookupValue.errors" class="invalid-feedback">
                                <div *ngIf="f.lookupValue.errors.required">Lookup Value is required</div>
                            </div>
                        </div>
                    </td>
                    <td>
                        <div class="form-group">
                            <input type="text" class="form-control"
                                [ngClass]="{ 'is-invalid': submitted && f.displayName.errors }"
                                formControlName="displayName" id="displayName" placeholder="Display Name"
                                style="width: 100%;">
                            <div *ngIf="submitted && f.displayName.errors" class="invalid-feedback">
                                <div *ngIf="f.displayName.errors.required">Display Name is required</div>
                            </div>
                        </div>
                    </td>
                    <td><input type="submit" class="btn-primary" value="Create Lookup"></td>
                    <td><input type="reset" class="btn-primary" value="Reset"></td>
                </tr>
            </tbody>
        </table>
    </form>
</div>