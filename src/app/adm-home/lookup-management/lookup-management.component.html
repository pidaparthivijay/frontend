<button class="btn btn-primary" (click)="toggleViews('upload')">Upload Excel</button> &nbsp;&nbsp;&nbsp;
<button class="btn btn-primary" (click)="toggleViews('create')">Create New</button>&nbsp;&nbsp;&nbsp;
<button class="btn btn-primary" (click)="toggleViews('view')">View All</button>
<br>
<br>
<div *ngIf="upload">
    <input type="file" name="lookupExcel" (change)="onSelectFile($event)" id="lookupExcel">
    <button class="btn btn-primary" (click)="uploadLookupExcel()">Upload Excel</button>
</div>
<br>
<br>
<p-table #lookupTable *ngIf="viewAll && !createNew" [style]="{'width':'70%','margin-top':'8px'}" [value]="lookupList"
    [globalFilterFields]="['lookupDefName','lookupValue','displayName']" [paginator]="true"
    [showCurrentPageReport]="true" currentPageReportTemplate="Showing {first} to {last} of {totalRecords} entries"
    [rowsPerPageOptions]="[5, 10,15]" [rows]="10">
    <ng-template pTemplate="caption">
        <i class="pi pi-search" style="margin:4px 4px 0 0"></i>
        <input type="text" pInputText size="50" placeholder="Global Filter"
            (input)="lookupTable.filterGlobal($event.target.value, 'contains')" style="width:auto">
    </ng-template>
    <ng-template pTemplate="header">
        <tr>
            <th pSortableColumn="lookupDefName">Lookup Definition Name<p-sortIcon field="lookupDefName"></p-sortIcon>
            </th>
            <th pSortableColumn="lookupValue">Lookup Value<p-sortIcon field="lookupValue"></p-sortIcon>
            </th>
            <th pSortableColumn="displayName">Lookup Display Name<p-sortIcon field="displayName"></p-sortIcon>
            <th pSortableColumn="createdDate">Created Date<p-sortIcon field="createdDate"></p-sortIcon>
            <th pSortableColumn="updatedDate">Updated Date<p-sortIcon field="updatedDate"></p-sortIcon>
            <th>Action</th>
            <th>Update</th>
        </tr>
        <tr>
            <th>
                <p-dropdown [options]="lookupDefinitions"
                    (onChange)="lookupTable.filter($event.value, 'lookupDefName', 'equals')"
                    styleClass="p-column-filter" placeholder="Select a Status" [showClear]="true">
                    <ng-template let-option pTemplate="item">
                        <span>{{option.label}}</span>
                    </ng-template>
                </p-dropdown>
            </th>
            <th>
                <input pInputText type="text"
                    (input)="lookupTable.filter($event.target.value, 'lookupValue', 'contains')" placeholder="Value"
                    class="p-column-filter">
            </th>
            <th>
                <input pInputText type="text"
                    (input)="lookupTable.filter($event.target.value, 'displayName', 'contains')"
                    placeholder="Display Name" class="p-column-filter">
            </th>
            <th>
                <p-calendar (onSelect)="onDateSelect($event)"
                    (onClearClick)="lookupTable.filter('', 'date', 'createdDate')" [showButtonBar]="true"
                    styleClass="p-column-filter" placeholder="Created Date" [readonlyInput]="true">
                </p-calendar>
            </th>
            <th>
                <p-calendar (onSelect)="onDateSelect($event)"
                    (onClearClick)="lookupTable.filter('', 'date', 'updatedDate')" [showButtonBar]="true"
                    styleClass="p-column-filter" placeholder="Updated Date" [readonlyInput]="true">
                </p-calendar>
            </th>
            <th></th>
            <th></th>
        </tr>
    </ng-template>
    <ng-template pTemplate="body" let-lookup let-editing="editing" let-ri="rowIndex">
        <tr [pEditableRow]="lookup">
            <td pEditableColumn>
                <p-cellEditor>
                    <ng-template pTemplate="input">
                        <p-dropdown [options]="lookupDefinitions" [(ngModel)]="lookup.lookupDefName"
                            [style]="{'width':'auto', 'height':'auto'}">
                        </p-dropdown>
                    </ng-template>
                    <ng-template pTemplate="output">
                        {{lookup.lookupDefName}}
                    </ng-template>
                </p-cellEditor>
            </td>
            <td pEditableColumn>
                <p-cellEditor>
                    <ng-template pTemplate="input">
                        <input pInputText type="text" [(ngModel)]="lookup.lookupValue" lookupValue>
                    </ng-template>
                    <ng-template pTemplate="output">
                        {{lookup.lookupValue}}
                    </ng-template>
                </p-cellEditor>
            </td>
            <td pEditableColumn>
                <p-cellEditor>
                    <ng-template pTemplate="input">
                        <input pInputText type="text" [(ngModel)]="lookup.displayName" displayName>
                    </ng-template>
                    <ng-template pTemplate="output">
                        {{lookup.displayName}}
                    </ng-template>
                </p-cellEditor>
            </td>
            <td pEditableColumn>
                {{lookup.createdDate === null ? "" : lookup.createdDate| date:'dd-MMM-yyyy'}}
            </td>
            <td pEditableColumn>{{lookup.updateDate === null ? "" : lookup.updateDate| date:'dd-MMM-yyyy'}}</td>
            <td style="text-align:center">
                <button class="btn-primary" (click)="toggleDelete(lookup.lookupId)">
                    <div *ngIf="lookup.deleted != 'Y'">Delete</div>
                    <div *ngIf="lookup.deleted === 'Y'">Undelete</div>
                </button>
                <button *ngIf="editing" pButton type="button" pCancelEditableRow icon="pi pi-times"
                    class="ui-button-danger btn-primary" (click)="onRowEditCancel(lookup, ri)">Cancel</button>
            </td>
            <td><button class="btn-primary" (click)="updateLookup(lookup)">Update</button></td>
        </tr>
    </ng-template>
</p-table>
<br>
<br>
<div>
    <form [formGroup]="loookupCreationForm" (ngSubmit)="createLookup()">
        <table *ngIf="!viewAll && createNew" class="table table-bordered table-striped"
            style="width: 75%; background:lightblue">
            <thead>
                <tr>
                    <th>Lookup Definition Name</th>
                    <th>Lookup Value</th>
                    <th>Lookup Display Name</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>
                        <div class="form-group">
                            <select name="lookupDefName" formControlName="lookupDefName" class="form-control"
                                [ngClass]="{ 'is-invalid': submitted && f.lookupDefName.errors }">
                                <option *ngFor="let lookupName of lookupDefNames; let i = index;" [selected]="i==0">
                                    {{lookupName}}</option>
                            </select>
                            <div *ngIf="submitted && f.lookupDefName.errors" class="invalid-feedback">
                                <div *ngIf="f.lookupDefName.errors.required">Lookup Definition Name is required</div>
                            </div>
                        </div>
                    </td>
                    <td>
                        <div class="form-group">
                            <input type="lookupValue" class="form-control"
                                [ngClass]="{ 'is-invalid': submitted && f.lookupValue.errors }"
                                formControlName="lookupValue" id="lookupValue" placeholder="Lookup Value"
                                style="width: 100%;">
                            <div *ngIf="submitted && f.lookupValue.errors" class="invalid-feedback">
                                <div *ngIf="f.lookupValue.errors.required">Lookup Value is required</div>
                            </div>
                        </div>
                    </td>
                    <td>
                        <div class="form-group">
                            <input type="text" class="form-control"
                                [ngClass]="{ 'is-invalid': submitted && f.displayName.errors }"
                                formControlName="displayName" id="displayName" placeholder="Display Name"
                                style="width: 100%;">
                            <div *ngIf="submitted && f.displayName.errors" class="invalid-feedback">
                                <div *ngIf="f.displayName.errors.required">Display Name is required</div>
                            </div>
                        </div>
                    </td>
                    <td><input type="submit" class="btn-primary" value="Create Lookup"></td>
                    <td><input type="reset" class="btn-primary" value="Reset"></td>
                </tr>
            </tbody>
        </table>
    </form>
</div>